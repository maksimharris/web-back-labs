{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 8{% endblock %}

{% block main %}
<style>
    .articles-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .search-form {
        margin-bottom: 20px;
        padding: 15px;
        background-color: #f5f5f5;
        border-radius: 8px;
    }
    
    .search-form input {
        width: 70%;
        padding: 8px;
        margin-right: 10px;
    }
    
    .article {
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .article-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    
    .article-title {
        font-size: 18px;
        font-weight: bold;
        color: #2c3e50;
        margin: 0;
    }
    
    .article-meta {
        font-size: 12px;
        color: #666;
        margin-bottom: 10px;
    }
    
    .article-text {
        line-height: 1.6;
        margin-bottom: 10px;
    }
    
    .article-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }
    
    .btn {
        padding: 5px 10px;
        border-radius: 4px;
        text-decoration: none;
        font-size: 14px;
    }
    
    .btn-edit {
        background-color: #3498db;
        color: white;
    }
    
    .btn-delete {
        background-color: #e74c3c;
        color: white;
    }
    
    .btn-create {
        background-color: #27ae60;
        color: white;
        padding: 8px 15px;
        margin-bottom: 20px;
    }
    
    .badge {
        display: inline-block;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 12px;
        margin-left: 5px;
    }
    
    .badge-public {
        background-color: #2ecc71;
        color: white;
    }
    
    .badge-favorite {
        background-color: #f39c12;
        color: white;
    }
    
    .no-articles {
        text-align: center;
        color: #666;
        padding: 40px;
    }
</style>

<div class="articles-container">
    <h1>–°—Ç–∞—Ç—å–∏</h1>
    
    <form class="search-form" action="/lab8/search" method="get">
        <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π..." 
               value="{{ search_query if search_query }}">
        <button type="submit">–ù–∞–π—Ç–∏</button>
    </form>
    
    {% if current_user.is_authenticated %}
        <a href="/lab8/create" class="btn btn-create">‚úèÔ∏è –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é</a>
    {% endif %}
    
    {% if search_query %}
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "{{ search_query }}"</h3>
    {% endif %}
    
    {% if articles %}
        {% for article in articles %}
            <div class="article">
                <div class="article-header">
                    <h3 class="article-title">
                        {{ article.title }}
                        {% if article.is_public %}
                            <span class="badge badge-public">–ü—É–±–ª–∏—á–Ω–∞—è</span>
                        {% endif %}
                        {% if article.is_favorite %}
                            <span class="badge badge-favorite">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                        {% endif %}
                    </h3>
                    <div class="article-meta">
                        –õ–∞–π–∫–æ–≤: {{ article.likes }}
                    </div>
                </div>
                
                <div class="article-text">
                    {{ article.article_text[:200] }}{% if article.article_text|length > 200 %}...{% endif %}
                </div>
                
                {% if current_user.is_authenticated and article.login_id == current_user.id %}
                    <div class="article-actions">
                        <a href="/lab8/edit/{{ article.id }}" class="btn btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                        <a href="/lab8/delete/{{ article.id }}" class="btn btn-delete" 
                           onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <div class="no-articles">
            {% if search_query %}
                <p>–°—Ç–∞—Ç—å–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É "{{ search_query }}" –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
            {% else %}
                <p>–°—Ç–∞—Ç—å–∏ –ø–æ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</p>
                {% if current_user.is_authenticated %}
                    <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —Å—Ç–∞—Ç—å—é!</p>
                {% else %}
                    <p>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é.</p>
                {% endif %}
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}