{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 5{% endblock %}

{% block main %}
    <h1>–ú–æ–∏ —Å—Ç–∞—Ç—å–∏</h1>
    
    <div style="margin-bottom: 20px;">
        <a href="/lab5/create" style="margin-right: 15px;">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é</a>
        <a href="/lab5/users" style="margin-right: 15px;">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
        <a href="/lab5/public" style="margin-right: 15px;">–ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏</a>
        <a href="/lab5/profile" style="margin-right: 15px;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
        <a href="/lab5/logout">–í—ã–π—Ç–∏</a>
    </div>
    
    {% if error %}
        <div style="color: #666; font-style: italic; margin: 15px 0;">
            {{ error }}
        </div>
    {% else %}
        {% for article in articles %}
            <div style="border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 5px; {% if article.is_favorite %} background-color: #fff9e6; {% endif %}">
                <h3>
                    {{ article.title }}
                    {% if article.is_favorite %} ‚≠ê {% endif %}
                    {% if article.is_public %} üåê {% endif %}
                </h3>
                <p style="white-space: pre-wrap;">{{ article.article_text }}</p>
                <div style="margin-top: 10px;">
                    <form action="/lab5/toggle_favorite/{{ article.id }}" method="post" style="display: inline; margin-right: 10px;">
                        <button type="submit">
                            {% if article.is_favorite %} ‚ùå –£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ {% else %} ‚≠ê –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ {% endif %}
                        </button>
                    </form>
                    
                    <form action="/lab5/toggle_public/{{ article.id }}" method="post" style="display: inline; margin-right: 10px;">
                        <button type="submit">
                            {% if article.is_public %} üîí –°–¥–µ–ª–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ–π {% else %} üåê –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å {% endif %}
                        </button>
                    </form>
                    
                    <a href="/lab5/edit/{{ article.id }}" style="margin-right: 10px;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    
                    <form action="/lab5/delete/{{ article.id }}" method="post" style="display: inline;">
                        <button type="submit" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ç–∞—Ç—å—é?')" 
                                style="color: red; border: none; background: none; cursor: pointer; text-decoration: underline;">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </form>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endblock %}